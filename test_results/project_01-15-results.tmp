====================================================================================================================================================================================
== Test 15: Update Multiple files in Archive
== Creates an initial archive, then updates several files in that archive.
== Extracts files from the archive using 'tar', then checks that each extracted
== file has the correct contents.
Running test...
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Step 1
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Action 1: Run File Setup
-- Copies files to be archived into current directory
Expected output is in file 'test_results/raw/project_01-15-1-expected.tmp'
Actual output is in file 'test_results/raw/project_01-15-1-actual.tmp'
Test PASSED
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Step 2
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Action 1: Run Archive Creation
-- Create an initial archive using 'minitar'
Expected output is in file 'test_results/raw/project_01-15-2-expected.tmp'
Actual output is in file 'test_results/raw/project_01-15-2-actual.tmp'
Test PASSED
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Step 3
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Action 1: Run File Modification
-- Change several files in current directory to new versions
Expected output is in file 'test_results/raw/project_01-15-3-expected.tmp'
Actual output is in file 'test_results/raw/project_01-15-3-actual.tmp'
Test PASSED
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Step 4
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Action 1: Run Archive Update
-- Update the archive to contain the new file versions
Expected output is in file 'test_results/raw/project_01-15-4-expected.tmp'
Actual output is in file 'test_results/raw/project_01-15-4-actual.tmp'
Test PASSED
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Step 5
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Action 1: Run File Comparison
-- Extract files from the archive with 'tar' and verify that their contents are
-- correct
Expected output is in file 'test_results/raw/project_01-15-5-expected.tmp'
Actual output is in file 'test_results/raw/project_01-15-5-actual.tmp'
Test FAILED
== Side-by-Side Comparison ==
== Differing lines have a character like '|' '>' or '<' in the middle
==== EXPECT ====                               ==== ACTUAL ====
$ tar -xvf test.tar                            $ tar -xvf test.tar
f1.txt                                       | tar: test.tar: Cannot open: No such file or directory
f3.bin                                       | tar: Error is not recoverable: exiting now
f5.txt                                       <
f7.bin                                       <
f1.txt                                       <
f5.txt                                       <
f7.bin                                       <
$ diff -q f1.txt test_cases/resources/f2.txt   $ diff -q f1.txt test_cases/resources/f2.txt
$ diff -q f3.bin test_cases/resources/f3.bin   $ diff -q f3.bin test_cases/resources/f3.bin
$ diff -q f5.txt test_cases/resources/f6.txt   $ diff -q f5.txt test_cases/resources/f6.txt
$ diff -q f7.bin test_cases/resources/f8.bin   $ diff -q f7.bin test_cases/resources/f8.bin
$ rm -rf test_files/                           $ rm -rf test_files/
$ mkdir test_files                             $ mkdir test_files
$ mv f1.txt test_files/                        $ mv f1.txt test_files/
$ mv f3.bin test_files/                        $ mv f3.bin test_files/
$ mv f5.txt test_files/                        $ mv f5.txt test_files/
$ mv f7.bin test_files/                        $ mv f7.bin test_files/
$ exit                                         $ exit
exit                                           exit
== Line Differences ==
EXPECT  2) f1.txt
ACTUAL  2) tar: test.tar: Cannot open: No such file or directory
EXPECT  3) f3.bin
ACTUAL  3) tar: Error is not recoverable: exiting now
EXPECT  4) f5.txt
EXPECT  5) f7.bin
EXPECT  6) f1.txt
EXPECT  7) f5.txt
EXPECT  8) f7.bin
