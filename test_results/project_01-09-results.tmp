====================================================================================================================================================================================
== Test 9: Append Multiple Files to Archive
== Creates an initial archive from a small number of files. Then appends several
== more files to that archive. Extracts all files from the archive and checks
== that they match their original versions.
Running test...
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Step 1
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Action 1: Run File Setup
-- Copies files to be archived into current directory
Expected output is in file 'test_results/raw/project_01-09-1-expected.tmp'
Actual output is in file 'test_results/raw/project_01-09-1-actual.tmp'
Test PASSED
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Step 2
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Action 1: Run Archive Creation
-- Create an initial archive using 'minitar'
Expected output is in file 'test_results/raw/project_01-09-2-expected.tmp'
Actual output is in file 'test_results/raw/project_01-09-2-actual.tmp'
Test PASSED
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Step 3
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Action 1: Run Archive Append
-- Append to the previously created archive
Expected output is in file 'test_results/raw/project_01-09-3-expected.tmp'
Actual output is in file 'test_results/raw/project_01-09-3-actual.tmp'
Test PASSED
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Step 4
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Action 1: Run File Comparison
-- Compare files extracted from archive using 'tar' with the original versions.
Expected output is in file 'test_results/raw/project_01-09-4-expected.tmp'
Actual output is in file 'test_results/raw/project_01-09-4-actual.tmp'
Test FAILED
== Side-by-Side Comparison ==
== Differing lines have a character like '|' '>' or '<' in the middle
==== EXPECT ====                                       ==== ACTUAL ====
$ tar -xvf test.tar                                    $ tar -xvf test.tar
hello.txt                                            | tar: test.tar: Cannot open: No such file or directory
f1.bin                                               | tar: Error is not recoverable: exiting now
f2.bin                                               <
f1.txt                                               <
gatsby.txt                                           <
f3.txt                                               <
f3.bin                                               <
f4.txt                                               <
f4.bin                                               <
f5.txt                                               <
$ diff -q hello.txt test_cases/resources/hello.txt     $ diff -q hello.txt test_cases/resources/hello.txt
$ diff -q f1.bin test_cases/resources/f1.bin           $ diff -q f1.bin test_cases/resources/f1.bin
$ diff -q f2.bin test_cases/resources/f2.bin           $ diff -q f2.bin test_cases/resources/f2.bin
$ diff -q f1.txt test_cases/resources/f1.txt           $ diff -q f1.txt test_cases/resources/f1.txt
$ diff -q gatsby.txt test_cases/resources/gatsby.txt   $ diff -q gatsby.txt test_cases/resources/gatsby.txt
$ diff -q f3.txt test_cases/resources/f3.txt           $ diff -q f3.txt test_cases/resources/f3.txt
$ diff -q f3.bin test_cases/resources/f3.bin           $ diff -q f3.bin test_cases/resources/f3.bin
$ diff -q f4.txt test_cases/resources/f4.txt           $ diff -q f4.txt test_cases/resources/f4.txt
$ diff -q f4.bin test_cases/resources/f4.bin           $ diff -q f4.bin test_cases/resources/f4.bin
$ diff -q f5.txt test_cases/resources/f5.txt           $ diff -q f5.txt test_cases/resources/f5.txt
$ rm -rf test_files/                                   $ rm -rf test_files/
$ mkdir test_files                                     $ mkdir test_files
$ mv hello.txt test_files/                             $ mv hello.txt test_files/
$ mv f1.bin test_files/                                $ mv f1.bin test_files/
$ mv f2.bin test_files/                                $ mv f2.bin test_files/
$ mv f1.txt test_files/                                $ mv f1.txt test_files/
$ mv gatsby.txt test_files/                            $ mv gatsby.txt test_files/
$ mv f3.txt test_files/                                $ mv f3.txt test_files/
$ mv f3.bin test_files/                                $ mv f3.bin test_files/
$ mv f4.txt test_files/                                $ mv f4.txt test_files/
$ mv f4.bin test_files/                                $ mv f4.bin test_files/
$ mv f5.txt test_files/                                $ mv f5.txt test_files/
$ exit                                                 $ exit
exit                                                   exit
== Line Differences ==
EXPECT  2) hello.txt
ACTUAL  2) tar: test.tar: Cannot open: No such file or directory
EXPECT  3) f1.bin
ACTUAL  3) tar: Error is not recoverable: exiting now
EXPECT  4) f2.bin
EXPECT  5) f1.txt
EXPECT  6) gatsby.txt
EXPECT  7) f3.txt
EXPECT  8) f3.bin
EXPECT  9) f4.txt
EXPECT 10) f4.bin
EXPECT 11) f5.txt
